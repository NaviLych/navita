<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#f5f5f7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>叫号专注</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Tab Bar Navigation -->
    <nav class="tab-bar" id="tabBar">
        <button class="tab-item active" data-view="listView">
            <span class="tab-icon todo-icon"></span>
            <span class="tab-label">待办</span>
        </button>
        <button class="tab-item" data-view="accountView">
            <span class="tab-icon account-icon"></span>
            <span class="tab-label">账户</span>
        </button>
    </nav>

    <!-- Todo List View -->
    <div class="view" id="listView">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="title">待办</h1>
                <p class="subtitle" id="todoCount">0 个任务</p>
            </div>
            <button class="theme-btn" id="themeToggle" aria-label="切换主题">
                <span class="theme-icon"></span>
            </button>
        </header>

        <!-- Main Content -->
        <main class="container">
            <!-- Todo List -->
            <div class="todo-list" id="todoList">
                <!-- Todos will be inserted here dynamically -->
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState">
                <div class="empty-illustration">
                    <div class="empty-ticket"></div>
                </div>
                <div class="empty-text">暂无待办</div>
                <div class="empty-hint">点击下方添加您的第一个任务</div>
            </div>
        </main>

        <!-- Floating Add Button -->
        <div class="fab-container">
            <div class="input-group">
                <input 
                    type="text" 
                    id="todoInput" 
                    class="todo-input" 
                    placeholder="输入任务名称..."
                    autocomplete="off"
                />
                <select id="projectSelect" class="project-select">
                    <option value="">选择项目</option>
                </select>
            </div>
            <button class="fab" id="addBtn" aria-label="添加任务">
                <span class="fab-icon"></span>
            </button>
        </div>
    </div>

    <!-- Account/Stats View -->
    <div class="view hidden" id="accountView">
        <header class="header">
            <div class="header-content">
                <h1 class="title">账户</h1>
                <p class="subtitle">专注收益总览</p>
            </div>
            <button class="theme-btn" id="themeToggleAccount" aria-label="切换主题">
                <span class="theme-icon"></span>
            </button>
        </header>

        <main class="container account-container">
            <!-- Account Card -->
            <div class="account-card">
                <div class="account-header">
                    <div class="account-logo">
                        <span>💰</span>
                    </div>
                    <div class="account-info">
                        <div class="account-name">专注银行</div>
                        <div class="account-number">时间储蓄账户</div>
                    </div>
                </div>
                <div class="account-balance">
                    <div class="balance-label">总专注时长</div>
                    <div class="balance-value" id="totalBalance">0小时0分</div>
                </div>
                <div class="account-meta">
                    <span id="completedCount">已完成 0 项任务</span>
                </div>
            </div>

            <!-- Period Stats -->
            <div class="stats-section">
                <div class="section-header">
                    <h2 class="section-title">收益明细</h2>
                </div>
                <div class="period-tabs">
                    <button class="period-tab active" data-period="today">今日</button>
                    <button class="period-tab" data-period="week">本周</button>
                    <button class="period-tab" data-period="month">本月</button>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon time-icon">⏱</div>
                        <div class="stat-content">
                            <div class="stat-value" id="periodTime">0分</div>
                            <div class="stat-label">专注时长</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon task-icon">✓</div>
                        <div class="stat-content">
                            <div class="stat-value" id="periodTasks">0</div>
                            <div class="stat-label">完成任务</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon avg-icon">📊</div>
                        <div class="stat-content">
                            <div class="stat-value" id="periodAvg">0分</div>
                            <div class="stat-label">平均时长</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon streak-icon">🔥</div>
                        <div class="stat-content">
                            <div class="stat-value" id="periodSessions">0</div>
                            <div class="stat-label">专注次数</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Projects Section -->
            <div class="projects-section">
                <div class="section-header">
                    <h2 class="section-title">项目账户</h2>
                    <button class="add-project-btn" id="addProjectBtn">
                        <span>+</span>
                    </button>
                </div>
                <div class="projects-list" id="projectsList">
                    <!-- Projects will be inserted here dynamically -->
                </div>
                <div class="empty-projects" id="emptyProjects">
                    <p>暂无项目，点击右上角添加</p>
                </div>
            </div>

            <!-- Recent Records -->
            <div class="records-section">
                <div class="section-header">
                    <h2 class="section-title">交易记录</h2>
                </div>
                <div class="records-list" id="recordsList">
                    <!-- Records will be inserted here dynamically -->
                </div>
                <div class="empty-records" id="emptyRecords">
                    <p>暂无完成记录</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Focus/Timer View -->
    <div class="view hidden" id="focusView">
        <header class="focus-header">
            <button class="back-btn" id="backBtn" aria-label="返回">
                <span class="back-icon"></span>
                <span class="back-text">返回</span>
            </button>
            <button class="theme-btn" id="themeToggleFocus" aria-label="切换主题">
                <span class="theme-icon"></span>
            </button>
        </header>

        <!-- Bank Ticket Style Display -->
        <div class="ticket-container">
            <div class="ticket">
                <!-- Ticket Top Decoration -->
                <div class="ticket-top-edge"></div>
                
                <div class="ticket-inner">
                    <!-- Bank Logo Style Header -->
                    <div class="ticket-brand-section">
                        <div class="ticket-logo">
                            <span class="logo-icon">⏱</span>
                        </div>
                        <div class="ticket-brand">专注银行</div>
                        <div class="ticket-branch" id="ticketBranch">时间管理中心</div>
                    </div>

                    <!-- Ticket Number Section - Main Focus -->
                    <div class="ticket-number-section">
                        <div class="ticket-label">请保管好您的号码</div>
                        <div class="ticket-number-wrapper">
                            <div class="ticket-number" id="ticketNumber">A001</div>
                        </div>
                        <div class="ticket-date" id="ticketDate"></div>
                    </div>

                    <!-- Divider with perforation effect -->
                    <div class="ticket-perforation"></div>

                    <!-- Task Info Section -->
                    <div class="ticket-task-section">
                        <div class="task-label">业务类型</div>
                        <div class="task-name" id="ticketTaskName">任务名称</div>
                    </div>

                    <!-- Timer Section -->
                    <div class="timer-section">
                        <div class="timer-ring">
                            <svg class="timer-svg" viewBox="0 0 200 200">
                                <circle class="timer-bg" cx="100" cy="100" r="90"/>
                                <circle class="timer-progress" cx="100" cy="100" r="90" id="timerProgress"/>
                            </svg>
                            <div class="timer-content">
                                <div class="timer-display" id="timerDisplay">00:00</div>
                                <div class="timer-label">已等候</div>
                            </div>
                        </div>
                    </div>

                    <!-- Control Buttons -->
                    <div class="timer-controls">
                        <button class="control-btn start-btn" id="startBtn">
                            <span class="btn-icon play-icon"></span>
                            <span class="btn-text">开始</span>
                        </button>
                        <button class="control-btn pause-btn hidden" id="pauseBtn">
                            <span class="btn-icon pause-icon"></span>
                            <span class="btn-text">暂停</span>
                        </button>
                        <button class="control-btn reset-btn" id="resetBtn">
                            <span class="btn-icon reset-icon"></span>
                            <span class="btn-text">重置</span>
                        </button>
                    </div>

                    <!-- Completion Section -->
                    <div class="completion-section hidden" id="completionSection">
                        <button class="complete-btn" id="completeBtn">
                            <span class="complete-icon"></span>
                            <span>完成任务</span>
                        </button>
                    </div>
                </div>

                <!-- Ticket Bottom Decoration -->
                <div class="ticket-bottom-edge"></div>
            </div>
        </div>
    </div>

    <!-- Add Project Modal -->
    <div class="modal hidden" id="projectModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>新建项目</h3>
                <button class="modal-close" id="closeProjectModal">×</button>
            </div>
            <div class="modal-body">
                <input 
                    type="text" 
                    id="projectNameInput" 
                    class="modal-input" 
                    placeholder="输入项目名称..."
                    autocomplete="off"
                />
                <div class="color-picker">
                    <label>选择颜色</label>
                    <div class="color-options" id="colorOptions">
                        <button class="color-option active" data-color="#ff6b35" style="background:#ff6b35"></button>
                        <button class="color-option" data-color="#007aff" style="background:#007aff"></button>
                        <button class="color-option" data-color="#34c759" style="background:#34c759"></button>
                        <button class="color-option" data-color="#ff9500" style="background:#ff9500"></button>
                        <button class="color-option" data-color="#af52de" style="background:#af52de"></button>
                        <button class="color-option" data-color="#ff2d55" style="background:#ff2d55"></button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" id="cancelProject">取消</button>
                <button class="modal-btn confirm-btn" id="confirmProject">创建</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
