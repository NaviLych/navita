*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}
body{background:#0a0a0a;color:#fff}

.app{height:100%;position:relative}

/* 进度条 */
.progress-bar{position:fixed;top:0;left:0;right:0;height:3px;background:rgba(255,255,255,0.1);z-index:100}
.progress-fill{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);width:8.33%;transition:width .3s}
.card-counter{position:fixed;top:12px;right:16px;font-size:14px;opacity:0.6;z-index:100}

/* 卡片容器 */
.cards-wrapper{height:100%;overflow-y:scroll;scroll-snap-type:y mandatory;-webkit-overflow-scrolling:touch}
.cards-wrapper::-webkit-scrollbar{display:none}

/* 单张卡片 */
.card{height:100vh;scroll-snap-align:start;display:flex;align-items:center;justify-content:center;padding:20px;position:relative}
.card[data-theme="blue"]{background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%)}
.card[data-theme="green"]{background:linear-gradient(135deg,#0f2027 0%,#203a43 50%,#2c5364 100%)}
.card[data-theme="purple"]{background:linear-gradient(135deg,#1a1a2e 0%,#2d1b4e 100%)}
.card[data-theme="orange"]{background:linear-gradient(135deg,#1a1a2e 0%,#3d2914 100%)}

.card-content{max-width:420px;width:100%;text-align:center}
.card-badge{display:inline-block;background:rgba(255,255,255,0.15);padding:4px 12px;border-radius:20px;font-size:12px;margin-bottom:16px}
.card h1{font-size:1.6rem;margin-bottom:12px;line-height:1.3}
.card p{font-size:1rem;line-height:1.6;opacity:0.9}
.card .big-text{font-size:1.15rem;margin-bottom:16px}
.card .small{font-size:0.85rem;opacity:0.7;margin-top:8px}
.card em{font-style:normal;color:#ffd700}
.card strong{color:#7dd3fc}
.card b{color:#a5f3fc}

/* 两列布局 */
.two-col{display:flex;gap:20px;margin:20px 0}
.col{flex:1;background:rgba(255,255,255,0.05);border-radius:12px;padding:16px}
.col h3{font-size:1.1rem;margin:8px 0}
.icon-big{font-size:2.5rem}

/* 例子盒子 */
.example-box{background:rgba(255,255,255,0.08);border-radius:12px;padding:16px;margin:16px 0;text-align:left}
.example-box ul{padding-left:20px;margin-top:8px}
.example-box li{margin:6px 0;font-size:0.95rem}
.example-title{font-size:0.9rem;margin-bottom:8px;opacity:0.8}

/* 滑动提示 */
.swipe-hint{position:absolute;bottom:30px;left:50%;transform:translateX(-50%);font-size:14px;opacity:0.5;animation:bounce 2s infinite}
@keyframes bounce{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(-8px)}}

/* 互动盒子 */
.interactive-box{background:rgba(255,255,255,0.06);border-radius:12px;padding:16px;margin:16px 0}
.interactive-box.compact{padding:12px}
.sim-row{display:flex;align-items:center;gap:10px;margin:10px 0}
.sim-row label{font-size:0.85rem;min-width:80px;text-align:left}
.sim-row input[type="range"]{flex:1;accent-color:#667eea}
.sim-row span{min-width:50px;text-align:right;font-weight:600}
.sim-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.sim-grid label{font-size:0.75rem;display:flex;flex-direction:column;gap:4px}
.sim-grid input,.sim-grid select{padding:8px;border:1px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.1);color:#fff;border-radius:6px;font-size:0.9rem}

/* 结果卡片 */
.result-card{background:rgba(255,255,255,0.1);border-radius:8px;padding:12px;margin-top:12px}
.result-card p{margin:6px 0;font-size:0.9rem}
.big-num{font-size:1.4rem;font-weight:700;color:#7dd3fc}
.big-result{font-size:1.2rem;font-weight:600}
.highlight-text{color:#fbbf24;font-weight:700}

/* 因素列表 */
.factors-list{text-align:left;margin:16px 0}
.factor{display:flex;align-items:center;gap:10px;padding:10px;background:rgba(255,255,255,0.05);border-radius:8px;margin:6px 0}
.factor-icon{font-size:1.2rem}
.tag{font-size:0.7rem;padding:2px 6px;border-radius:4px;margin-left:auto}
.tag.up{background:#059669;color:#fff}

/* Delta 可视化 */
.delta-visual{margin:20px 0}
.delta-bar{height:30px;background:rgba(255,255,255,0.1);border-radius:15px;position:relative;overflow:hidden}
.delta-fill{height:100%;background:linear-gradient(90deg,#ef4444,#fbbf24,#22c55e);transition:width .3s}
.delta-label{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:600}

/* Theta 动画 */
.theta-animation{margin:20px 0}
.ice-cube{font-size:4rem;animation:melt 3s infinite}
@keyframes melt{0%{opacity:1;transform:scale(1)}50%{opacity:0.6;transform:scale(0.85)}100%{opacity:1;transform:scale(1)}}

/* Vega 波浪 */
.vega-visual{display:flex;flex-direction:column;align-items:center;gap:8px;margin:16px 0}
.wave{font-size:1.5rem;opacity:0.5}
.wave.big{font-size:2rem;opacity:1}

/* 图表 */
.chart-container{background:rgba(255,255,255,0.05);border-radius:12px;padding:12px;margin:12px 0}
.chart-container.small{height:140px}
.chart-container canvas{max-height:180px}

/* 策略网格 */
.strategy-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin:16px 0}
.strat-card{background:rgba(255,255,255,0.08);border-radius:10px;padding:12px;cursor:pointer;transition:transform .2s,background .2s}
.strat-card:hover,.strat-card.active{background:rgba(255,255,255,0.15);transform:scale(1.02)}
.strat-icon{font-size:1.8rem}
.strat-card h4{font-size:0.95rem;margin:6px 0 2px}

/* 章节导航指示器 */
.chapter-nav{position:fixed;right:12px;top:50%;transform:translateY(-50%);z-index:100;display:flex;flex-direction:column;gap:6px}
.chapter-dot{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,0.2);cursor:pointer;transition:all .3s;position:relative}
.chapter-dot:hover{background:rgba(255,255,255,0.5);transform:scale(1.3)}
.chapter-dot.active{background:rgba(255,255,255,0.9);transform:scale(1.2)}
.chapter-dot::before{content:attr(data-label);position:absolute;right:20px;top:50%;transform:translateY(-50%);white-space:nowrap;font-size:11px;background:rgba(0,0,0,0.8);padding:4px 8px;border-radius:4px;opacity:0;pointer-events:none;transition:opacity .2s}
.chapter-dot:hover::before{opacity:1}
.chapter-section{display:flex;flex-direction:column;gap:4px;margin:4px 0}
.chapter-section-title{font-size:9px;color:rgba(255,255,255,0.4);writing-mode:vertical-rl;text-orientation:mixed;transform:rotate(180deg);letter-spacing:1px}

/* 公式盒子 */
.formula-box{background:rgba(102,126,234,0.15);border:1px solid rgba(102,126,234,0.3);border-radius:12px;padding:16px;margin:16px 0;text-align:center}
.formula{font-size:1.1rem;font-family:'Times New Roman',serif;letter-spacing:1px;margin:8px 0}
.formula-large{font-size:1.3rem}
.formula sub{font-size:0.7em}
.formula sup{font-size:0.7em}
.formula-desc{font-size:0.8rem;opacity:0.7;margin-top:8px}

/* 变量解释 */
.var-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin:12px 0;text-align:left}
.var-item{display:flex;align-items:center;gap:8px;padding:8px;background:rgba(255,255,255,0.05);border-radius:6px}
.var-symbol{font-weight:bold;color:#7dd3fc;min-width:24px}
.var-desc{font-size:0.85rem;opacity:0.9}

/* 平价定理可视化 */
.parity-visual{display:flex;align-items:center;justify-content:center;gap:10px;margin:16px 0;flex-wrap:wrap}
.parity-item{padding:10px 16px;border-radius:8px;text-align:center}
.parity-item.call{background:rgba(34,197,94,0.2);border:1px solid rgba(34,197,94,0.4)}
.parity-item.put{background:rgba(239,68,68,0.2);border:1px solid rgba(239,68,68,0.4)}
.parity-item.stock{background:rgba(59,130,246,0.2);border:1px solid rgba(59,130,246,0.4)}
.parity-item.bond{background:rgba(251,191,36,0.2);border:1px solid rgba(251,191,36,0.4)}
.parity-op{font-size:1.5rem;font-weight:bold;color:#fff}

/* 步骤列表 */
.step-list{text-align:left;margin:12px 0}
.step{display:flex;gap:12px;padding:10px;margin:6px 0;background:rgba(255,255,255,0.05);border-radius:8px;align-items:flex-start}
.step-num{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;min-width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.8rem;font-weight:bold}
.step-content{flex:1;font-size:0.9rem}

/* 对比表格 */
.compare-table{width:100%;border-collapse:collapse;margin:12px 0;font-size:0.85rem}
.compare-table th,.compare-table td{padding:10px;border:1px solid rgba(255,255,255,0.1);text-align:center}
.compare-table th{background:rgba(255,255,255,0.1);font-weight:600}
.compare-table tr:nth-child(even){background:rgba(255,255,255,0.03)}

/* 内在价值可视化 */
.value-breakdown{display:flex;justify-content:center;gap:20px;margin:16px 0}
.value-part{text-align:center;padding:12px 20px;border-radius:10px}
.value-part.intrinsic{background:rgba(34,197,94,0.2);border:1px solid rgba(34,197,94,0.4)}
.value-part.time{background:rgba(147,51,234,0.2);border:1px solid rgba(147,51,234,0.4)}
.value-amount{font-size:1.5rem;font-weight:bold;margin-bottom:4px}
.value-label{font-size:0.8rem;opacity:0.8}

/* Greeks总览 */
.greeks-summary{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin:12px 0}
.greek-card{padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;text-align:center}
.greek-symbol{font-size:1.5rem;font-weight:bold;margin-bottom:4px}
.greek-name{font-size:0.8rem;opacity:0.7}
.greek-value{font-size:1.1rem;font-weight:600;color:#7dd3fc;margin-top:4px}

/* 隐含波动率 */
.iv-meter{height:20px;background:linear-gradient(90deg,#22c55e,#fbbf24,#ef4444);border-radius:10px;position:relative;margin:16px 0}
.iv-marker{position:absolute;top:-8px;width:4px;height:36px;background:#fff;border-radius:2px;transition:left .3s}
.iv-labels{display:flex;justify-content:space-between;font-size:0.75rem;opacity:0.6;margin-top:4px}

/* 蒙特卡洛 */
.mc-paths{display:flex;flex-direction:column;gap:2px;margin:12px 0;padding:12px;background:rgba(255,255,255,0.05);border-radius:8px}
.mc-path{height:2px;background:linear-gradient(90deg,rgba(102,126,234,0.8),rgba(118,75,162,0.3));border-radius:1px;transform-origin:left}

/* 二叉树 */
.binomial-tree{display:flex;justify-content:center;margin:16px 0}
.tree-level{display:flex;flex-direction:column;justify-content:center;gap:20px;margin:0 15px}
.tree-node{padding:8px 12px;background:rgba(255,255,255,0.1);border-radius:6px;text-align:center;font-size:0.85rem;position:relative}
.tree-node::before,.tree-node::after{content:'';position:absolute;right:-15px;width:15px;height:1px;background:rgba(255,255,255,0.3)}
.tree-node::before{top:30%;transform:rotate(-15deg)}
.tree-node::after{bottom:30%;transform:rotate(15deg)}
.tree-level:last-child .tree-node::before,.tree-level:last-child .tree-node::after{display:none}

/* 响应式 */
@media(max-width:400px){
  .card h1{font-size:1.4rem}
  .card-content{padding:0 8px}
  .two-col{flex-direction:column;gap:12px}
  .sim-grid{grid-template-columns:repeat(2,1fr)}
  .chapter-nav{right:6px}
  .chapter-dot{width:8px;height:8px}
  .var-grid{grid-template-columns:1fr}
  .parity-visual{flex-direction:column}
  .greeks-summary{grid-template-columns:1fr}
}