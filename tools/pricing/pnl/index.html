<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>盈亏图 PnL - 期权定价教程</title>
  <link rel="stylesheet" href="../shared/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="page-header">
    <a href="../">←</a>
    <h1>📊 盈亏图 (PnL)</h1>
  </header>

  <div class="page-container">
    <section class="knowledge">
      <h2>什么是 PnL 图？</h2>
      <p>PnL（Profit and Loss）图展示<b>到期时</b>期权的盈亏随标的价格的变化。</p>

      <h2>Long Call 的 PnL</h2>
      <p>当 S &gt; K 时开始盈利；盈亏平衡点 = K + Premium。</p>
      <div class="highlight">
        最大亏损 = 权利金（有限）<br>
        最大收益 = 无限（标的上涨无上限）
      </div>

      <h2>Long Put 的 PnL</h2>
      <p>当 S &lt; K 时开始盈利；盈亏平衡点 = K − Premium。</p>
      <div class="highlight">
        最大亏损 = 权利金<br>
        最大收益 = K − Premium（标的跌到 0）
      </div>

      <h2>Short（卖方）</h2>
      <p>卖方收取权利金，PnL 曲线是买方的镜像。收益有限，风险可能很大。</p>

      <p>👉 在右侧设置参数并<b>拖动滑块</b>查看特定价格的即时盈亏。</p>
    </section>

    <aside class="sim-panel">
      <div class="sim-toggle">模拟器</div>
      <div class="sim-body">
        <div class="field"><label>当前标的价 S₀</label><input id="S0" type="number" value="100" step="1"></div>
        <div class="field"><label>执行价 K</label><input id="K" type="number" value="100" step="1"></div>
        <div class="field"><label>权利金 Premium</label><input id="premium" type="number" value="5" step="0.5"></div>
        <div class="field"><label>类型</label>
          <select id="type"><option value="call">Call</option><option value="put">Put</option></select>
        </div>
        <div class="field"><label>方向</label>
          <select id="side"><option value="long">Long</option><option value="short">Short</option></select>
        </div>
        <button class="btn" id="plot">绘制 PnL 图</button>
        <canvas id="pnlChart" style="margin-top:12px"></canvas>
        <div class="field" style="margin-top:12px">
          <label>观察价格 <span id="obsVal">100</span></label>
          <input id="obsSlider" type="range" min="50" max="150" value="100" style="width:100%">
        </div>
        <div class="result-box">
          <p><b>即时 PnL:</b> <span id="obsPnL">-</span></p>
        </div>
      </div>
    </aside>
  </div>

  <footer><small><a href="../">← 返回首页</a></small></footer>
  <script src="../shared/common.js"></script>
  <script src="app.js"></script>
</body>
</html>